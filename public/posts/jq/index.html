<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to parse json in terminal using jq | Monte's Snippets</title>
<meta name=keywords content="bash,shell"><meta name=description content="A practical tutorial on jq So here&rsquo;s the problem statement: Find the repository on github in which you have made most number of commits? And you need to do this on terminal (no python)
Ofcourse, one can use python to find the answer, and it might be probably easy for you, if you have been using python for last many years. But let&rsquo;s see if I can do this in terminal with jq and while doing so, let&rsquo;s learn about it."><meta name=author content="Me"><link rel=canonical href=//localhost:1313/posts/jq/><meta name=google-site-verification content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=//localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=//localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=//localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=//localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=//localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=//localhost:1313/posts/jq/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-1JKCGP13SR"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1JKCGP13SR",{anonymize_ip:!1})}</script><meta property="og:title" content="How to parse json in terminal using jq"><meta property="og:description" content="A practical tutorial on jq So here&rsquo;s the problem statement: Find the repository on github in which you have made most number of commits? And you need to do this on terminal (no python)
Ofcourse, one can use python to find the answer, and it might be probably easy for you, if you have been using python for last many years. But let&rsquo;s see if I can do this in terminal with jq and while doing so, let&rsquo;s learn about it."><meta property="og:type" content="article"><meta property="og:url" content="//localhost:1313/posts/jq/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-04-01T22:43:39+05:30"><meta property="article:modified_time" content="2024-04-01T22:43:39+05:30"><meta property="og:site_name" content="Monte's Snippets"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to parse json in terminal using jq"><meta name=twitter:description content="A practical tutorial on jq So here&rsquo;s the problem statement: Find the repository on github in which you have made most number of commits? And you need to do this on terminal (no python)
Ofcourse, one can use python to find the answer, and it might be probably easy for you, if you have been using python for last many years. But let&rsquo;s see if I can do this in terminal with jq and while doing so, let&rsquo;s learn about it."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"//localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"How to parse json in terminal using jq","item":"//localhost:1313/posts/jq/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to parse json in terminal using jq","name":"How to parse json in terminal using jq","description":"A practical tutorial on jq So here\u0026rsquo;s the problem statement: Find the repository on github in which you have made most number of commits? And you need to do this on terminal (no python)\nOfcourse, one can use python to find the answer, and it might be probably easy for you, if you have been using python for last many years. But let\u0026rsquo;s see if I can do this in terminal with jq and while doing so, let\u0026rsquo;s learn about it.","keywords":["bash","shell"],"articleBody":"A practical tutorial on jq So here’s the problem statement: Find the repository on github in which you have made most number of commits? And you need to do this on terminal (no python)\nOfcourse, one can use python to find the answer, and it might be probably easy for you, if you have been using python for last many years. But let’s see if I can do this in terminal with jq and while doing so, let’s learn about it.\nFor installation steps, refer this link\nThe endpoint to get all the repos is: https://api.github.com/users/{username}/repos. Let’s try that: curl 'https://api.github.com/users/mohit2152sharma/repos' # [{\"id\":347381136,\"node_id\":\"MDEwOlJlcG9zaXRvcnkzNDczODExMzY=\",\"name\":\"aqad-utilities\",\"full_name\":\"mohit2152sharma/aqad-utilities\",\"private\":false,\"owner\":{\"login\":\"mohit2152sharma\",\"id\":26904579,\"node_id\":\"MDQ6VXNlcjI2OTA0NTc5\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/26904579?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/mohit2152sharma\",\"html_url\":\"https://github.com/mohit2152sharma\",\"followers_url\":\"https://api.github.com/users/mohit2152sharma/followers\",\"following_url\":\"https://api.github.com/users/mohit2152sharma/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/mohit2152sharma/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/mohit2152sharma/starred{/owner}{/repo}\", # ... ... If you happen to get an output like above (not pretty), you can easily make it pretty with jq .. The . is also called the identity filter. It takes the input and produces the same value as output. By default it jq pretty prints, so identity filter can be used to pretty print a json output from a command like curl or from a json file (e.g. cat file.json | jq .) curl 'https://api.github.com/users/mohit2152sharma/repos' | jq . # [ # { # \"id\": 347381136, # \"node_id\": \"MDEwOlJlcG9zaXRvcnkzNDczODExMzY=\", # \"name\": \"aqad-utilities\", # ... # ... # ] Let me quickly check what all repositories I have by printing just their name. But let me first check, what all keys are available in the output dictionary. For that, I will use the command jq '.[1] | keys' .[] is the array value iterator, it returns all the values in the array. If you use an integer like .[1] it return the value at index 1. | is a pipe operator. It compbines two filters by taking the output from the filter on left and passing it to the filter on right. keys is a function which returns all the keys of an object (aka dictionary) in an array. There are more builtin functions in jq # output truncated because there are too many keys curl 'https://api.github.com/users/mohit2152sharma/repos' | jq '.[1] | keys' # [ # ... # ... # \"name\", # \"node_id\", # ... # ... # ] The following command .... | jq '.[].name' will return all the names of the repositories. As highlighted above .[] is an array iterator. It iterates over all the values in the array, since each element is an object, I use .name to get the value of key named name. .key_name is an object identifier. When a json object is passed .key_name returns the value at the key \"key_name\". You can also do .[\"key_name\"]. You can also chain the filters .key_name1.key_name2, this is equivalent to .key_name1 | .key_name2. curl 'https://api.github.com/users/mohit2152sharma/repos' | jq '.[].name' # \"bash-exmpls\" # \"codesnipper\" # \"cookiecutter-ml\" # \"emwv\" # ... # ... Let me quickly check, how many public and privte repositories I have. map(f) is a builtin function in jq. It applies the filter f to each element in the array and returns an array. length is also a builtin function, it returns the length (or number of elements) in the array. One can also use it with json objects or string, in those cases, it returns total number of keys and length of string respectively. curl 'https://api.github.com/users/mohit2152sharma/repos' | jq 'map(select(.visibility==\"public\")) | length' # 30 curl 'https://api.github.com/users/mohit2152sharma/repos' | jq 'map(select(.visibility==\"private\")) | length' # 0 # it looks like the response doesn't include private repos Now let’s get back to original question, the repository, in which I have made most number of commits. This more tricky than I expected, because, the url to get the number of commits is different. It is of the form https://api.github.com/users/{user_name}/{repo_name}/commits. So basically, I need to loop through each repo, hit this url, count the number of commits. This became more of bash programming task than that of jq programming task. USER_NAME=mohit2152sharma # get all the repositories getRepoUrl=https://api.github.com/users/${USER_NAME}/repos allRepoNames=\"\" j=1 while true; do repoInfo=$(curl --url \"$getRepoUrl\"?page=\"$j\" --header \"Authorization: Bearer $GITHUB_TOKEN\") repoInfoLength=$(echo \"$repoInfo\" | jq '. | length') if [ \"$repoInfoLength\" -eq 0 ]; then # the length of the empty array will be zero break else names=$(echo \"$repoInfo\" | jq '.[].name') allRepoNames=\"$allRepoNames $names\" j=$(( j + 1 )) fi done; # now loop through all repo names and find the commit counts maxCommits=0 repoNameWithMaxCommits=\"\" for repoName in \"$allRepoNames\"; do i=1 totalCommits=0 getCommitUrl=https://api.github.com/repos/${USER_NAME}/${repoName}/commits while true; do ncommits=$(curl --url \"$getCommitUrl\"?page=\"$i\" --header \"Authorization: Bearer $GITHUB_TOKEN\" | jq 'map(select(.author.login==\"mohit2152sharma\")) | length') if [ \"$ncommits\" -eq 0 ]; then break else totalCommits=$(( totalCommits + ncommits )) i=$(( i + 1 )) fi done if [ \"$totalCommits\" -gt \"$maxCommits\" ]; then maxCommits=$totalCommits repoNameWithMaxCommits=$repoName fi done echo \"Repository with most number of commits: ${repoNameWithMaxCommits} with ${maxCommits} commits\" The above script prints the following output: # Repository with most number of commits: rcoronavirus with 192 commits ","wordCount":"787","inLanguage":"en","datePublished":"2024-04-01T22:43:39+05:30","dateModified":"2024-04-01T22:43:39+05:30","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"//localhost:1313/posts/jq/"},"publisher":{"@type":"Organization","name":"Monte's Snippets","logo":{"@type":"ImageObject","url":"//localhost:1313/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=//localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=//localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=//localhost:1313/archives/ title=archives><span>archives</span></a></li><li><a href=//localhost:1313/tags/ title=tags><span>tags</span></a></li><li><a href=//localhost:1313/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=//localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=//localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">How to parse json in terminal using jq</h1><div class=post-meta><span title='2024-04-01 22:43:39 +0530 IST'>April 1, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;787 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/mohit2152sharma/montepy.in/content/posts/jq.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h2 id=a-practical-tutorial-on-jq>A practical tutorial on <code>jq</code><a hidden class=anchor aria-hidden=true href=#a-practical-tutorial-on-jq>#</a></h2><p>So here&rsquo;s the problem statement: <em><strong>Find the repository on github in which you have made most number of commits? And you need to do this on terminal (no python)</strong></em></p><p>Ofcourse, one can use python to find the answer, and it might be probably easy for you, if you have been using python for last many years. But let&rsquo;s see if I can do this in terminal with <code>jq</code> and while doing so, let&rsquo;s learn about it.</p><p>For installation steps, refer this <a href=https://jqlang.github.io/jq/download/>link</a></p><ul><li>The endpoint to get all the repos is: <a href=https://api.github.com/users/%7Busername%7D/repos><code>https://api.github.com/users/{username}/repos</code></a>. Let&rsquo;s try that:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl <span class=s1>&#39;https://api.github.com/users/mohit2152sharma/repos&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># [{&#34;id&#34;:347381136,&#34;node_id&#34;:&#34;MDEwOlJlcG9zaXRvcnkzNDczODExMzY=&#34;,&#34;name&#34;:&#34;aqad-utilities&#34;,&#34;full_name&#34;:&#34;mohit2152sharma/aqad-utilities&#34;,&#34;private&#34;:false,&#34;owner&#34;:{&#34;login&#34;:&#34;mohit2152sharma&#34;,&#34;id&#34;:26904579,&#34;node_id&#34;:&#34;MDQ6VXNlcjI2OTA0NTc5&#34;,&#34;avatar_url&#34;:&#34;https://avatars.githubusercontent.com/u/26904579?v=4&#34;,&#34;gravatar_id&#34;:&#34;&#34;,&#34;url&#34;:&#34;https://api.github.com/users/mohit2152sharma&#34;,&#34;html_url&#34;:&#34;https://github.com/mohit2152sharma&#34;,&#34;followers_url&#34;:&#34;https://api.github.com/users/mohit2152sharma/followers&#34;,&#34;following_url&#34;:&#34;https://api.github.com/users/mohit2152sharma/following{/other_user}&#34;,&#34;gists_url&#34;:&#34;https://api.github.com/users/mohit2152sharma/gists{/gist_id}&#34;,&#34;starred_url&#34;:&#34;https://api.github.com/users/mohit2152sharma/starred{/owner}{/repo}&#34;,</span>
</span></span><span class=line><span class=cl><span class=c1># ...</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><ul><li>If you happen to get an output like above (not pretty), you can easily make it pretty with <code>jq .</code>. The <code>.</code> is also called the <em><strong>identity filter</strong></em>. It takes the input and produces the same value as output. By default it <code>jq</code> pretty prints, so identity filter can be used to pretty print a json output from a command like curl or from a json file (e.g. <code>cat file.json | jq .</code>)</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl <span class=s1>&#39;https://api.github.com/users/mohit2152sharma/repos&#39;</span> <span class=p>|</span> jq .
</span></span><span class=line><span class=cl><span class=c1># [</span>
</span></span><span class=line><span class=cl><span class=c1>#   {</span>
</span></span><span class=line><span class=cl><span class=c1>#     &#34;id&#34;: 347381136,</span>
</span></span><span class=line><span class=cl><span class=c1>#     &#34;node_id&#34;: &#34;MDEwOlJlcG9zaXRvcnkzNDczODExMzY=&#34;,</span>
</span></span><span class=line><span class=cl><span class=c1>#     &#34;name&#34;: &#34;aqad-utilities&#34;,</span>
</span></span><span class=line><span class=cl><span class=c1># ...</span>
</span></span><span class=line><span class=cl><span class=c1># ...</span>
</span></span><span class=line><span class=cl><span class=c1># ]</span>
</span></span></code></pre></div><ul><li>Let me quickly check what all repositories I have by printing just their name. But let me first check, what all keys are available in the output dictionary. For that, I will use the command <code>jq '.[1] | keys'</code><ul><li><code>.[]</code> is the array value iterator, it returns all the values in the array. If you use an integer like <code>.[1]</code> it return the value at index 1.</li><li><code>|</code> is a pipe operator. It compbines two filters by taking the output from the filter on left and passing it to the filter on right.</li><li><code>keys</code> is a function which returns all the keys of an object (aka dictionary) in an array. There are more builtin functions in <a href=https://jqlang.github.io/jq/manual/#builtin-operators-and-functions>jq</a></li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># output truncated because there are too many keys</span>
</span></span><span class=line><span class=cl>curl <span class=s1>&#39;https://api.github.com/users/mohit2152sharma/repos&#39;</span> <span class=p>|</span> jq <span class=s1>&#39;.[1] | keys&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># [</span>
</span></span><span class=line><span class=cl><span class=c1>#   ...</span>
</span></span><span class=line><span class=cl><span class=c1>#   ...</span>
</span></span><span class=line><span class=cl><span class=c1>#   &#34;name&#34;,</span>
</span></span><span class=line><span class=cl><span class=c1>#   &#34;node_id&#34;,</span>
</span></span><span class=line><span class=cl><span class=c1>#   ...</span>
</span></span><span class=line><span class=cl><span class=c1>#   ...</span>
</span></span><span class=line><span class=cl><span class=c1># ]</span>
</span></span></code></pre></div><ul><li>The following command <code>.... | jq '.[].name'</code> will return all the names of the repositories.<ul><li>As highlighted above <code>.[]</code> is an array iterator. It iterates over all the values in the array, since each element is an object, I use <code>.name</code> to get the value of key named <code>name</code>.</li><li><code>.key_name</code> is an object identifier. When a json object is passed <code>.key_name</code> returns the value at the key <code>"key_name"</code>. You can also do <code>.["key_name"]</code>.</li><li>You can also chain the filters <code>.key_name1.key_name2</code>, this is equivalent to <code>.key_name1 | .key_name2</code>.</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl <span class=s1>&#39;https://api.github.com/users/mohit2152sharma/repos&#39;</span> <span class=p>|</span> jq <span class=s1>&#39;.[].name&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># &#34;bash-exmpls&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># &#34;codesnipper&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># &#34;cookiecutter-ml&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># &#34;emwv&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># ...</span>
</span></span><span class=line><span class=cl><span class=c1># ...</span>
</span></span></code></pre></div><ul><li>Let me quickly check, how many public and privte repositories I have.<ul><li><code>map(f)</code> is a builtin function in <code>jq</code>. It applies the filter <code>f</code> to each element in the array and returns an array.</li><li><code>length</code> is also a builtin function, it returns the length (or number of elements) in the array. One can also use it with json objects or string, in those cases, it returns total number of keys and length of string respectively.</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl <span class=s1>&#39;https://api.github.com/users/mohit2152sharma/repos&#39;</span> <span class=p>|</span> jq <span class=s1>&#39;map(select(.visibility==&#34;public&#34;)) | length&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># 30</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl <span class=s1>&#39;https://api.github.com/users/mohit2152sharma/repos&#39;</span> <span class=p>|</span> jq <span class=s1>&#39;map(select(.visibility==&#34;private&#34;)) | length&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># 0</span>
</span></span><span class=line><span class=cl><span class=c1># it looks like the response doesn&#39;t include private repos</span>
</span></span></code></pre></div><ul><li>Now let&rsquo;s get back to original question, the repository, in which I have made most number of commits. This more tricky than I expected, because, the url to get the number of commits is different. It is of the form <code>https://api.github.com/users/{user_name}/{repo_name}/commits</code>. So basically, I need to loop through each repo, hit this url, count the number of commits. <em>This became more of bash programming task than that of <code>jq</code> programming task.</em></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>USER_NAME</span><span class=o>=</span>mohit2152sharma
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># get all the repositories</span>
</span></span><span class=line><span class=cl><span class=nv>getRepoUrl</span><span class=o>=</span>https://api.github.com/users/<span class=si>${</span><span class=nv>USER_NAME</span><span class=si>}</span>/repos
</span></span><span class=line><span class=cl><span class=nv>allRepoNames</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>j</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>while</span> true<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nv>repoInfo</span><span class=o>=</span><span class=k>$(</span>curl --url <span class=s2>&#34;</span><span class=nv>$getRepoUrl</span><span class=s2>&#34;</span>?page<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$j</span><span class=s2>&#34;</span> --header <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$GITHUB_TOKEN</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=nv>repoInfoLength</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$repoInfo</span><span class=s2>&#34;</span> <span class=p>|</span> jq <span class=s1>&#39;. | length&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$repoInfoLength</span><span class=s2>&#34;</span> -eq <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span> <span class=c1># the length of the empty array will be zero</span>
</span></span><span class=line><span class=cl>        <span class=nb>break</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=nv>names</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$repoInfo</span><span class=s2>&#34;</span> <span class=p>|</span> jq <span class=s1>&#39;.[].name&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>        <span class=nv>allRepoNames</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$allRepoNames</span><span class=s2> </span><span class=nv>$names</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nv>j</span><span class=o>=</span><span class=k>$((</span> j <span class=o>+</span> <span class=m>1</span> <span class=k>))</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>done</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># now loop through all repo names and find the commit counts</span>
</span></span><span class=line><span class=cl><span class=nv>maxCommits</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=nv>repoNameWithMaxCommits</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> repoName in <span class=s2>&#34;</span><span class=nv>$allRepoNames</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nv>i</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=nv>totalCommits</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>    <span class=nv>getCommitUrl</span><span class=o>=</span>https://api.github.com/repos/<span class=si>${</span><span class=nv>USER_NAME</span><span class=si>}</span>/<span class=si>${</span><span class=nv>repoName</span><span class=si>}</span>/commits
</span></span><span class=line><span class=cl>    <span class=k>while</span> true<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>        <span class=nv>ncommits</span><span class=o>=</span><span class=k>$(</span>curl --url <span class=s2>&#34;</span><span class=nv>$getCommitUrl</span><span class=s2>&#34;</span>?page<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$i</span><span class=s2>&#34;</span> --header <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$GITHUB_TOKEN</span><span class=s2>&#34;</span> <span class=p>|</span> jq <span class=s1>&#39;map(select(.author.login==&#34;mohit2152sharma&#34;)) | length&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$ncommits</span><span class=s2>&#34;</span> -eq <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=nb>break</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=nv>totalCommits</span><span class=o>=</span><span class=k>$((</span> totalCommits <span class=o>+</span> ncommits <span class=k>))</span>
</span></span><span class=line><span class=cl>            <span class=nv>i</span><span class=o>=</span><span class=k>$((</span> i <span class=o>+</span> <span class=m>1</span> <span class=k>))</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$totalCommits</span><span class=s2>&#34;</span> -gt <span class=s2>&#34;</span><span class=nv>$maxCommits</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nv>maxCommits</span><span class=o>=</span><span class=nv>$totalCommits</span>
</span></span><span class=line><span class=cl>        <span class=nv>repoNameWithMaxCommits</span><span class=o>=</span><span class=nv>$repoName</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Repository with most number of commits: </span><span class=si>${</span><span class=nv>repoNameWithMaxCommits</span><span class=si>}</span><span class=s2> with </span><span class=si>${</span><span class=nv>maxCommits</span><span class=si>}</span><span class=s2> commits&#34;</span>
</span></span></code></pre></div><ul><li>The above script prints the following output:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># Repository with most number of commits: rcoronavirus with 192 commits
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=//localhost:1313/tags/bash/>Bash</a></li><li><a href=//localhost:1313/tags/shell/>Shell</a></li></ul><nav class=paginav><a class=next href=//localhost:1313/posts/find/><span class=title>Next »</span><br><span>Impress your colleagues with find</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share How to parse json in terminal using jq on x" href="https://x.com/intent/tweet/?text=How%20to%20parse%20json%20in%20terminal%20using%20jq&amp;url=%2f%2flocalhost%3a1313%2fposts%2fjq%2f&amp;hashtags=bash%2cshell"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to parse json in terminal using jq on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f%2flocalhost%3a1313%2fposts%2fjq%2f&amp;title=How%20to%20parse%20json%20in%20terminal%20using%20jq&amp;summary=How%20to%20parse%20json%20in%20terminal%20using%20jq&amp;source=%2f%2flocalhost%3a1313%2fposts%2fjq%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to parse json in terminal using jq on reddit" href="https://reddit.com/submit?url=%2f%2flocalhost%3a1313%2fposts%2fjq%2f&title=How%20to%20parse%20json%20in%20terminal%20using%20jq"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to parse json in terminal using jq on facebook" href="https://facebook.com/sharer/sharer.php?u=%2f%2flocalhost%3a1313%2fposts%2fjq%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to parse json in terminal using jq on whatsapp" href="https://api.whatsapp.com/send?text=How%20to%20parse%20json%20in%20terminal%20using%20jq%20-%20%2f%2flocalhost%3a1313%2fposts%2fjq%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to parse json in terminal using jq on telegram" href="https://telegram.me/share/url?text=How%20to%20parse%20json%20in%20terminal%20using%20jq&amp;url=%2f%2flocalhost%3a1313%2fposts%2fjq%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to parse json in terminal using jq on ycombinator" href="https://news.ycombinator.com/submitlink?t=How%20to%20parse%20json%20in%20terminal%20using%20jq&u=%2f%2flocalhost%3a1313%2fposts%2fjq%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=//localhost:1313/>Monte's Snippets</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>